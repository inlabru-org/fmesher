---
title: "Converting legacy INLA mesh code to fmesher"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Converting legacy INLA mesh code to fmesher}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo = FALSE}
suppressPackageStartupMessages(library(fmesher))
suppressPackageStartupMessages(library(tibble))
```

```{r echo = FALSE}
df <- tribble(
  ~INLA, ~fmesher,
  "inla.mesh.create()", c("fm_rcdt_2d()", "fm_rcdt_2d_inla()"),
  "inla.mesh.2d()", c("fm_mesh_2d()", "fm_mesh_2d_inla()"),
  "inla.mesh.1d()", "fm_mesh_1d()",
  "inla.mesh.lattice()", "fm_lattice_2d()",
  "inla.mesh.segment()", "fm_segm()",
  "inla.nonconvex.hull()", c("fm_nonconvex_hull()", "fm_extensions()"),
  c("inla.mesh.boundary()", "inla.mesh.interior()"), "fm_segm()",
  "inla.mesh.projector()", "fm_evaluator()",
  "inla.mesh.project()", "fm_evaluate()",
  "inla.CRS()", c("fm_crs()", "fm_CRS()"),
  "inla.spTransform()", "fm_transform()",
  "inla.spde.make.A()", c("fm_basis()", "fm_row_kron()")
)

webref <- "https://inlabru-org.github.io/fmesher/reference/"
for (k in seq_len(nrow(df))) {
  df$fmesher[[k]] <-
    sub(
      pattern = "([^(]+)(\\(.*\\))$", replacement =
        paste0('<a href="', webref, '\\1.html">\\1</a>\\2'),
      x = df$fmesher[[k]]
    )
}
```

```{r, echo = FALSE}
knitr::kable(df)
```
